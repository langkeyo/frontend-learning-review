{
  "title": "重试机制练习",
  "description": "实现一个带有指数退避重试的文件上传功能，提高上传成功率。",
  "starterCode": {
    "html": "<div id=\"app\">\n  <h1>文件上传</h1>\n  <input type=\"file\" id=\"fileInput\">\n  <button id=\"uploadBtn\">上传文件</button>\n  <div id=\"progress\"></div>\n  <div id=\"status\"></div>\n</div>",
    "css": "body {\n  font-family: Arial, sans-serif;\n  max-width: 800px;\n  margin: 0 auto;\n  padding: 20px;\n}\n\n#progress {\n  margin: 15px 0;\n  background-color: #f0f0f0;\n  border-radius: 4px;\n  height: 20px;\n  overflow: hidden;\n}\n\n#progress-bar {\n  height: 100%;\n  background-color: #4CAF50;\n  width: 0%;\n  transition: width 0.3s;\n}\n\n#status {\n  margin-top: 10px;\n  color: #666;\n}",
    "js": "// 模拟文件上传API\nconst mockUploadApi = {\n  upload: (file) => {\n    return new Promise((resolve, reject) => {\n      // 50%的概率失败\n      if (Math.random() < 0.5) {\n        setTimeout(() => {\n          reject(new Error('上传失败，请重试'));\n        }, 500);\n      } else {\n        // 模拟上传进度\n        let progress = 0;\n        const interval = setInterval(() => {\n          progress += 10;\n          if (progress >= 100) {\n            clearInterval(interval);\n            resolve({\n              success: true,\n              message: '文件上传成功',\n              fileName: file.name\n            });\n          }\n        }, 100);\n        \n        return () => clearInterval(interval); // 返回取消函数\n      }\n    });\n  }\n};\n\n// 文件上传\nasync function uploadFile(file) {\n  try {\n    const result = await mockUploadApi.upload(file);\n    return result;\n  } catch (error) {\n    throw error;\n  }\n}\n\n// 显示上传进度\nfunction showProgress(progress) {\n  const progressBar = document.getElementById('progress-bar');\n  progressBar.style.width = `${progress}%`;\n}\n\n// 显示状态\nfunction showStatus(message) {\n  document.getElementById('status').textContent = message;\n}\n\n// 上传按钮事件\ndocument.getElementById('uploadBtn').addEventListener('click', async () => {\n  const fileInput = document.getElementById('fileInput');\n  const file = fileInput.files[0];\n  \n  if (!file) {\n    showStatus('请选择一个文件');\n    return;\n  }\n  \n  showStatus('准备上传...');\n  showProgress(0);\n  \n  try {\n    const result = await uploadFile(file);\n    showStatus(result.message);\n  } catch (error) {\n    showStatus(`上传失败: ${error.message}`);\n  }\n});"
  },
  "expectedOutput": "重试机制应该：\n1. 当上传失败时自动重试\n2. 使用指数退避策略，避免服务器压力\n3. 显示上传进度和状态\n4. 最终成功或显示错误信息\n5. 提高上传成功率\n\nJavaScript应该使用：\n- 重试逻辑\n- 指数退避\n- 错误处理\n- Promise\n- 可能使用async/await\n\nHTML和CSS保持不变，因为这是一个JavaScript练习。\n\n注意：在实际环境中，你需要实现重试逻辑。在这个练习中，你可以添加重试计数和延迟逻辑。"
}